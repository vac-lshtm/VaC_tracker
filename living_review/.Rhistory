title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
# collate results
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_21Jun2021_full.csv")  ### UPDATE ###
#system("rm pubmed_*")
#system("rm mx_reduced*")
#system("rm easyPubMed_data_01.txt*")
# load packages
library(easyPubMed)
library(dplyr)
library(formattable)
library(medrxivr)
# search medrxiv
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-06-28") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
# search pubmed
if (!("pubmed_1.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/01/01:2020/06/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df1 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df1, "pubmed_1.csv")
} else { pm_df1 = read.csv("pubmed_1.csv", row.names=1) }
# search part 2
if (!("pubmed_2.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/02:2020/08/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df2 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df2, "pubmed_2.csv")
} else { pm_df2 = read.csv("pubmed_2.csv", row.names=1) }
# search part 3
if (!("pubmed_3.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/08/02:2020/11/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df3 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df3, "pubmed_3.csv")
} else { pm_df3 = read.csv("pubmed_3.csv", row.names=1) }
# search part 4
if (!("pubmed_4.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/11/02:2021/02/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df4 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df4, "pubmed_4.csv")
} else { pm_df4 = read.csv("pubmed_4.csv", row.names=1) }
# search part 5
if (!("pubmed_5.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/02/02:2021/05/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df5 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df5, "pubmed_5.csv")
} else { pm_df5 = read.csv("pubmed_5.csv", row.names=1) }
# search part 6
if (!("pubmed_6.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/05/02:2021/06/28[crdt]" ### UPDATE ###
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df6 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df6, "pubmed_6.csv")
} else { pm_df6 = read.csv("pubmed_6.csv", row.names=1) }
# merge results
pm_df = rbind(pm_df1, pm_df2, pm_df3, pm_df4, pm_df5, pm_df6)
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
# collate results
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_28Jun2021_full.csv")  ### UPDATE ###
#system("rm pubmed_*")
#system("rm mx_reduced*")
#system("rm easyPubMed_data_01.txt*")
# load packages
library(easyPubMed)
library(dplyr)
library(formattable)
library(medrxivr)
# search medrxiv
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-05") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
# search pubmed
if (!("pubmed_1.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/01/01:2020/06/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df1 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df1, "pubmed_1.csv")
} else { pm_df1 = read.csv("pubmed_1.csv", row.names=1) }
# search part 2
if (!("pubmed_2.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/02:2020/08/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df2 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df2, "pubmed_2.csv")
} else { pm_df2 = read.csv("pubmed_2.csv", row.names=1) }
# search part 3
if (!("pubmed_3.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/08/02:2020/11/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df3 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df3, "pubmed_3.csv")
} else { pm_df3 = read.csv("pubmed_3.csv", row.names=1) }
# search part 4
if (!("pubmed_4.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/11/02:2021/02/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df4 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df4, "pubmed_4.csv")
} else { pm_df4 = read.csv("pubmed_4.csv", row.names=1) }
# search part 5
if (!("pubmed_5.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/02/02:2021/05/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df5 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df5, "pubmed_5.csv")
} else { pm_df5 = read.csv("pubmed_5.csv", row.names=1) }
# search part 6
if (!("pubmed_6.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/05/02:2021/07/05[crdt]" ### UPDATE ###
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df6 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df6, "pubmed_6.csv")
} else { pm_df6 = read.csv("pubmed_6.csv", row.names=1) }
# merge results
pm_df = rbind(pm_df1, pm_df2, pm_df3, pm_df4, pm_df5, pm_df6)
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
# collate results
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_05Jul2021_full.csv")  ### UPDATE ###
#system("rm pubmed_*")
#system("rm mx_reduced*")
#system("rm easyPubMed_data_01.txt*")
sum(collated$source=="pubmed")
sum(collated$source=="medrxiv")
# load packages
library(easyPubMed)
library(dplyr)
library(formattable)
library(medrxivr)
# search medrxiv
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-05") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
# search pubmed
if (!("pubmed_1.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/01/01:2020/06/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df1 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df1, "pubmed_1.csv")
} else { pm_df1 = read.csv("pubmed_1.csv", row.names=1) }
# search part 2
if (!("pubmed_2.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/02:2020/08/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df2 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df2, "pubmed_2.csv")
} else { pm_df2 = read.csv("pubmed_2.csv", row.names=1) }
# search part 3
if (!("pubmed_3.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/08/02:2020/11/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df3 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df3, "pubmed_3.csv")
} else { pm_df3 = read.csv("pubmed_3.csv", row.names=1) }
# search part 4
if (!("pubmed_4.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/11/02:2021/02/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df4 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df4, "pubmed_4.csv")
} else { pm_df4 = read.csv("pubmed_4.csv", row.names=1) }
# search part 5
if (!("pubmed_5.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/02/02:2021/05/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df5 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df5, "pubmed_5.csv")
} else { pm_df5 = read.csv("pubmed_5.csv", row.names=1) }
# search part 6
if (!("pubmed_6.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/05/02:2021/07/05[crdt]" ### UPDATE ###
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df6 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df6, "pubmed_6.csv")
} else { pm_df6 = read.csv("pubmed_6.csv", row.names=1) }
# merge results
pm_df = rbind(pm_df1, pm_df2, pm_df3, pm_df4, pm_df5, pm_df6)
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
# collate results
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_05Jul2021_full.csv")  ### UPDATE ###
#system("rm pubmed_*")
#system("rm mx_reduced*")
#system("rm easyPubMed_data_01.txt*")
sum(collated$source=="pubmed")
sum(collated$source=="medrxiv")
### COVID-19 vaccine tracker
### Vaccine Centre, London School of Hygiene & Tropical Medicine
### Contact: Edward Parker, edward.parker@lshtm.ac.uk
### Shiny app code
### LOAD PACKAGES ---------------------------------------------------------------------------------
if(!require(data.table)) install.packages("data.table", repos = "http://cran.us.r-project.org")
if(!require(DT)) install.packages("DT", repos = "http://cran.us.r-project.org")
if(!require(dplyr)) install.packages("dplyr", repos = "http://cran.us.r-project.org")
if(!require(ggplot2)) install.packages("ggplot2", repos = "http://cran.us.r-project.org")
if(!require(plotly)) install.packages("plotly", repos = "http://cran.us.r-project.org")
if(!require(shiny)) install.packages("shiny", repos = "http://cran.us.r-project.org")
if(!require(shinythemes)) install.packages("shinythemes", repos = "http://cran.us.r-project.org")
if(!require(stringr)) install.packages("stringr", repos = "http://cran.us.r-project.org")
if(!require(stringi)) install.packages("stringi", repos = "http://cran.us.r-project.org")
if(!require(timevis)) install.packages("timevis", repos = "http://cran.us.r-project.org")
if(!require(RColorBrewer)) install.packages("RColorBrewer", repos = "http://cran.us.r-project.org")
if(!require(shinydashboard)) install.packages("shinydashboard", repos = "http://cran.us.r-project.org")
if(!require(writexl)) install.packages("writexl", repos = "http://cran.us.r-project.org")
if(!require(tidyverse)) install.packages("tidyverse", repos = "http://cran.us.r-project.org")
if(!require(readxl)) install.packages("readxl", repos = "http://cran.us.r-project.org")
if(!require(shinyWidgets)) install.packages("shinyWidgets", repos = "http://cran.us.r-project.org")
if(!require(cowplot)) install.packages("cowplot", repos = "http://cran.us.r-project.org")
if(!require(BiocManager)) install.packages("BiocManager", repos = "http://cran.us.r-project.org")
if(!require(leaflet)) install.packages("leaflet", repos = "http://cran.us.r-project.org")
if(!require(geojsonio)) install.packages("geojsonio", repos = "http://cran.us.r-project.org")
options(repos = BiocManager::repositories())
if(!require(ComplexHeatmap)) install.packages("ComplexHeatmap", repos = "https://bioconductor.org")
if(!require(scales)) install.packages("scales", repos = "https://bioconductor.org")
### Generate landscape inputs for each layer -------------------------------------------------------------------------------------
update_full = "05 July 2021"
update_equity = format(Sys.Date(), "%d %B %Y")
source("input_code/VaC_landscape.R")
source("input_code/VaC_efficacy_map.R")
source("input_code/VaC_living_review.R")
# load packages
library(easyPubMed)
library(dplyr)
library(formattable)
library(medrxivr)
# search medrxiv
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-12") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
# search pubmed
if (!("pubmed_1.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/01/01:2020/06/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df1 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df1, "pubmed_1.csv")
} else { pm_df1 = read.csv("pubmed_1.csv", row.names=1) }
# search part 2
if (!("pubmed_2.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/02:2020/08/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df2 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df2, "pubmed_2.csv")
} else { pm_df2 = read.csv("pubmed_2.csv", row.names=1) }
# search part 3
if (!("pubmed_3.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/08/02:2020/11/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df3 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df3, "pubmed_3.csv")
} else { pm_df3 = read.csv("pubmed_3.csv", row.names=1) }
# search part 4
if (!("pubmed_4.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/11/02:2021/02/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df4 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df4, "pubmed_4.csv")
} else { pm_df4 = read.csv("pubmed_4.csv", row.names=1) }
# load packages
library(easyPubMed)
library(dplyr)
library(formattable)
library(medrxivr)
# search medrxiv
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-12") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
# search pubmed
if (!("pubmed_1.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/01/01:2020/06/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df1 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df1, "pubmed_1.csv")
} else { pm_df1 = read.csv("pubmed_1.csv", row.names=1) }
# search part 2
if (!("pubmed_2.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/02:2020/08/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df2 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df2, "pubmed_2.csv")
} else { pm_df2 = read.csv("pubmed_2.csv", row.names=1) }
# search part 3
if (!("pubmed_3.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/08/02:2020/11/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df3 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df3, "pubmed_3.csv")
} else { pm_df3 = read.csv("pubmed_3.csv", row.names=1) }
# search part 4
if (!("pubmed_4.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/11/02:2021/01/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df4 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df4, "pubmed_4.csv")
} else { pm_df4 = read.csv("pubmed_4.csv", row.names=1) }
# search part 5
if (!("pubmed_5.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/01/02:2021/05/01[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df5 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df5, "pubmed_5.csv")
} else { pm_df5 = read.csv("pubmed_5.csv", row.names=1) }
# search part 6
if (!("pubmed_6.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/05/02:2021/07/12[crdt]" ### UPDATE ###
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df6 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df6, "pubmed_6.csv")
} else { pm_df6 = read.csv("pubmed_6.csv", row.names=1) }
# merge results
pm_df = rbind(pm_df1, pm_df2, pm_df3, pm_df4, pm_df5, pm_df6)
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
# collate results
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_12Jul2021_full.csv")  ### UPDATE ###
#system("rm pubmed_*")
#system("rm mx_reduced*")
#system("rm easyPubMed_data_01.txt*")
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-12") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
if (!("pubmed_1.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/01:2020/07/12[crdt]"
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df1 <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df1, "pubmed_1.csv")
} else { pm_df1 = read.csv("pubmed_1.csv", row.names=1) }
library(easyPubMed)
library(dplyr)
library(dplyr)
library(formattable)
library(medrxivr)
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-12") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
if (!("pm_df.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2020/06/01:2020/07/12[crdt]"  ### UPDATE
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df, "pm_df.csv")
} else { pm_df1 = read.csv("pm_df.csv", row.names=1) }
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
if (!("pm_df.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/06/01:2021/07/12[crdt]"  ### UPDATE
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df, "pm_df.csv")
} else { pm_df1 = read.csv("pm_df.csv", row.names=1) }
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_12Jul2021_full.csv")  ### UPDATE ###
# load packages
library(easyPubMed)
library(dplyr)
library(formattable)
library(medrxivr)
# search medrxiv
if (!("mx_reduced.csv" %in% list.files())) {
term1 <- c("[Cc]oronavirus","COVID*","SARS*") # OR
term2 <- c("[Vv]accin*") # OR
term3 <- c("[Tt]rial", "[Pp]hase") # OR
query <- list(term1, term2, term3) # AND
mx_results <- mx_search(data = mx_snapshot(), query = query, from_date = "2020-01-01", to_date = "2021-07-19") ### UPDATE ###
mx_reduced = mx_results %>% select(c(ID, title, abstract, date, doi, author_corresponding,
author_corresponding_institution))
mx_reduced$source = "medrxiv"
write.csv(mx_reduced, "mx_reduced.csv")
} else { mx_reduced = read.csv("mx_reduced.csv", row.names=1) }
# search pubmed
if (!("pm_df.csv" %in% list.files())) {
query <- "(coronavirus OR COVID OR SARS*) AND vaccin* AND (trial OR phase) AND 2021/06/01:2021/07/19[crdt]"  ### UPDATE
pm_download <- batch_pubmed_download(pubmed_query_string = query, encoding = "ASCII")
pm_df <- table_articles_byAuth(pubmed_data = pm_download[[1]], included_authors = "first", encoding = "ASCII")
write.csv(pm_df, "pm_df.csv")
} else { pm_df1 = read.csv("pm_df.csv", row.names=1) }
pm_results <- data.frame(
ID = pm_df$pmid,
title = pm_df$title,
abstract = pm_df$abstract,
date = paste0(pm_df$year,"-",pm_df$month,"-",pm_df$day),
doi = pm_df$doi,
author_corresponding = paste(pm_df$firstname,pm_df$lastname),
author_corresponding_institution = pm_df$address,
source = "pubmed"
)
# collate results
collated = rbind(mx_reduced, pm_results)
write.csv(collated, "pre_abstract_screening_19Jul2021_full.csv")  ### UPDATE ###
#system("rm pubmed_*")
#system("rm mx_reduced*")
#system("rm easyPubMed_data_01.txt*")
